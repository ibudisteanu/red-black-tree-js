!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("rbTree",[],e):"object"==typeof exports?exports.rbTree=e():t.rbTree=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var l=r[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={RED:0,BLACK:1};e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t){if(isNaN(t)&&"string"==typeof t){var e=t.toLowerCase();if(e.length>1){var r="",n=!0,l=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){r+=i.value.charCodeAt(0)-96+""}}catch(t){l=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(l)throw o}}return parseInt(r)}return e.charCodeAt(0)-96}return t}function l(t){return null==t||null==t.key&&null==t.value&&t.color===i.default.BLACK&&null==t.left&&null==t.right}Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=n,e.isNilNode=l;var o=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=r(1),a=function(){function t(e,r){n(this,t),this.key=(0,u.toNumber)(e),this.value=r,this.left=null,this.right=null,this.color=null,this.parent=null}return l(t,[{key:"isRed",value:function(){return this.color===i.default.RED}},{key:"getValue",value:function(){return{key:this.key,value:this.value}}},{key:"getKeyValueArray",value:function(){return[this.key,this.value]}},{key:"getValueKeyArray",value:function(){return[this.value,this.key]}}]),t}();e.default=a,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=new i.default(null,null);return e.color=a.default.BLACK,e.parent=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=r(2),i=n(o),u=r(0),a=n(u);e.default=l,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var r=new i.default(t,e),n=new i.default(null,null);n.color=a.default.BLACK,n.left=null,n.right=null,n.parent=r;var l=new i.default(null,null);return l.color=a.default.BLACK,l.left=null,l.right=null,l.parent=r,r.left=n,r.right=l,r}Object.defineProperty(e,"__esModule",{value:!0});var o=r(2),i=n(o),u=r(0),a=n(u);e.default=l,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(1),i=function(){function t(e){n(this,t),this.stack=[],this.curr=e}return l(t,[{key:"hasNext",value:function(){return!(0,o.isNilNode)(this.curr)||this.stack.length>0}},{key:"next",value:function(){for(;!(0,o.isNilNode)(this.curr);)this.stack.push(this.curr),this.curr=this.curr.left;this.curr=this.stack.pop();var t=this.curr;return this.curr=this.curr.right,t.getValue()}}]),t}();e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(2),u=n(i),a=r(0),f=n(a),s=r(4),c=n(s),h=r(3),d=n(h),p=r(5),v=n(p),y=r(1),g=function(){function t(e,r){l(this,t),this.emptyTree(),this.limitMax=e,this.limitMin=r}return o(t,[{key:"clone",value:function(t){return new u.default(t.key,t.value,t.left,t.right,t.color,t.parent)}},{key:"find",value:function(t){for(var e=(0,y.toNumber)(t),r=this.root;null!=r;)if(e<r.key)r=r.left;else{if(!(e>r.key))return r.value;r=r.right}return null}},{key:"leftMostChild",value:function(t){if((0,y.isNilNode)(t))return null;for(;!(0,y.isNilNode)(t.left);)t=t.left;return t}},{key:"findNode",value:function(t){for(var e=this.root;null!=e;)if(t<e.key)e=e.left;else{if(!(t>e.key))return t===e.key?e:null;e=e.right}return null}},{key:"update",value:function(t,e){this.findNode(t).value=e}},{key:"rotateRight",value:function(t){var e=t.left;(0,y.isNilNode)(e.right)?t.left=(0,d.default)(t):t.left=e.right,(0,y.isNilNode)(e.right)||(e.right.parent=t),e.parent=t.parent,(0,y.isNilNode)(t.parent)?this.root=e:t===t.parent.right?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},{key:"rotateLeft",value:function(t){var e=t.right;(0,y.isNilNode)(e.left)?t.right=(0,d.default)(t):t.right=e.left,(0,y.isNilNode)(e.left)||(e.left.parent=t),e.parent=t.parent,(0,y.isNilNode)(t.parent)?this.root=e:t===t.parent.left?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},{key:"insert",value:function(t,e){var r=null,n=this.root;if(this.limitMax&&this.count>=this.limitMax){if(!(t>this.min(this.root).key))return null;this.removeNode(this.min(this.root))}else if(this.limitMin&&this.count>=this.limitMin){if(!(t<this.max(this.root).key))return null;this.removeNode(this.max(this.root))}var l=(0,c.default)(t,e);if(this.count++,null==this.root)this.root=l,l.color=f.default.BLACK,l.parent=null;else{for(;!(0,y.isNilNode)(n);)r=n,n=l.key<n.key?n.left:n.right;l.parent=r,l.key<r.key?r.left=l:r.right=l,l.left=(0,d.default)(l),l.right=(0,d.default)(l),l.color=f.default.RED,this.fixTree(l)}return l}},{key:"fixTree",value:function(t){for(;null!=t.parent&&t.parent.color===f.default.RED;){var e=null;if(t.parent===t.parent.parent.left){if(null!=(e=t.parent.parent.right)&&e.color===f.default.RED){t.parent.color=f.default.BLACK,e.color=f.default.BLACK,t.parent.parent.color=f.default.RED,t=t.parent.parent;continue}t===t.parent.right&&(t=t.parent,this.rotateLeft(t)),t.parent.color=f.default.BLACK,t.parent.parent.color=f.default.RED,this.rotateRight(t.parent.parent)}else{if(null!=(e=t.parent.parent.left)&&e.color===f.default.RED){t.parent.color=f.default.BLACK,e.color=f.default.BLACK,t.parent.parent.color=f.default.RED,t=t.parent.parent;continue}t===t.parent.left&&(t=t.parent,this.rotateRight(t)),t.parent.color=f.default.BLACK,t.parent.parent.color=f.default.RED,this.rotateLeft(t.parent.parent)}}this.root.color=f.default.BLACK}},{key:"findHeight",value:function(t){if(null==t)return-1;var e=this.findHeight(t.left),r=this.findHeight(t.right);return e>r?e+1:r+1}},{key:"print",value:function(){var t=this.findHeight(this.root)+1;this.printHelper(this.root,"__",t)}},{key:"printHelper",value:function(t,e,r){var n=r;if(null!=t){if(t===this.root&&console.log(t.key+" color: "+t.color),null!=t.left){var l="( parent node "+t.left.parent.key+")";console.log(""+e+t.left.key+" color: "+t.left.color+" "+l)}if(null!=t.right){var o="( parent node "+t.right.parent.key+")";console.log(""+e+t.right.key+" color: "+t.right.color+" "+o)}n-=1,this.printHelper(t.left,e+e,n),this.printHelper(t.right,e+e,n)}}},{key:"emptyTree",value:function(){this.root=null,this.count=0}},{key:"min",value:function(t){if(null==t||void 0===t)return{};for(;!(0,y.isNilNode)(t.left);)t=t.left;return t}},{key:"minNode",value:function(){for(var t=this.root;!(0,y.isNilNode)(t.left);)t=t.left;return t.getValue()}},{key:"maxNode",value:function(){for(var t=this.root;!(0,y.isNilNode)(t.right);)t=t.right;return t.getValue()}},{key:"transplant",value:function(t,e){null==t.parent?this.root=e:t===t.parent.left?t.parent.left=e:t.parent.right=e,e.parent=t.parent}},{key:"remove",value:function(t){var e=this.findNode(t);this.removeNode(e)}},{key:"removeNode",value:function(t){if(null!=t){var e=void 0,r=t,n=r.color;(0,y.isNilNode)(t.left)?(e=t.right,this.transplant(t,t.right)):(0,y.isNilNode)(t.right)?(e=t.left,this.transplant(t,t.left)):(r=this.min(t.right),n=r.color,e=r.right,r.parent===t?e.parent=r:(this.transplant(r,r.right),r.right=t.right,r.right.parent=r),this.transplant(t,r),r.left=t.left,r.left.parent=r,r.color=t.color),n===f.default.BLACK&&this.removeFix(e),this.count--}}},{key:"removeFix",value:function(t){for(;t!==this.root&&t.color===f.default.BLACK;)if(t===t.parent.left){var e=t.parent.right;if(e.color===f.default.RED&&(e.color=f.default.BLACK,t.parent.color=f.default.RED,this.rotateLeft(t.parent),e=t.parent.right),e.left.color===f.default.BLACK&&e.right.color===f.default.BLACK){e.color=f.default.RED,t=t.parent;continue}e.right.color===f.default.BLACK&&(e.left.color=f.default.BLACK,e.color=f.default.RED,e=t.parent.right),e.right.color===f.default.RED&&(e.color=t.parent.color,t.parent.color=f.default.BLACK,e.right.color=f.default.BLACK,this.rotateLeft(t.parent),t=this.root)}else{var r=t.parent.left;r.color===f.default.RED&&(r.color=f.default.BLACK,t.parent.color=f.default.RED,this.rotateRight(t.parent),r=t.parent.left),r.right.color===f.default.BLACK&&r.left.color===f.default.BLACK?(r.color=f.default.RED,t=t.parent):r.left.color===f.default.BLACK&&(r.right.color=f.default.BLACK,r.color=f.default.RED,this.rotateLeft(r),r=t.parent.left),r.left.color===f.default.RED&&(r.color=t.parent.color,t.parent.color=f.default.BLACK,r.left.color=f.default.BLACK,this.rotateRight(t.parent),t=this.root)}t.color=f.default.BLACK}},{key:"inOrderSucc",value:function(t){if((0,y.isNilNode)(t))return null;if((0,y.isNilNode)(t.right)){for(var e=t,r=t.parent;null!=r&&r.left!==e;)e=r,r=r.parent;return null==r?null:r.getValue()}return this.leftMostChild(t.right).getValue()}},{key:"toSortedArray",value:function(t){var e=[];return this.inOrder(this.root,e,t),e}},{key:"toArrayPreOrder",value:function(t){var e=[];return this.preOrder(this.root,e,t),e}},{key:"toArrayPostOrder",value:function(t){var e=[];return this.postOrder(this.root,e,t),e}},{key:"inOrder",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"getValue";(0,y.isNilNode)(t)||(this.inOrder(t.left,e),e.push(t[r]()),this.inOrder(t.right,e))}},{key:"preOrder",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"getValue";(0,y.isNilNode)(t)||(e.push(t[r]()),this.preOrder(t.left,e),this.preOrder(t.right,e))}},{key:"postOrder",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"getValue";(0,y.isNilNode)(t)||(this.postOrder(t.left,e),this.postOrder(t.right,e),e.push(t[r]()))}},{key:"createIterator",value:function(){return new v.default(this.root)}},{key:"isEmpty",get:function(){return 0===this.count}}]),t}();e.default=g,t.exports=e.default}])});